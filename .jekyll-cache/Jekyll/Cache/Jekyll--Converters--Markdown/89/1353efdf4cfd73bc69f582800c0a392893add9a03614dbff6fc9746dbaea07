I"İ<p>æ¥<a href="http://ldehai.com/blog/2013/09/22/pyinstaller-matplotlib/">ä¸Šä¸€ç¯‡</a>ï¼Œpythoné¡¹ç›®ç”¨åˆ°äº†scipyè®¡ç®—æ¨¡å—ï¼Œä¹‹åç”¨pyinstalleræ‰“åŒ…åï¼Œæ¯æ¬¡è¿è¡Œå°±ä¼šæŠ¥è­¦å‘Šfile already exists but should not:â€¦â€¦./pyconfig.hã€‚è™½ç„¶ä¸å½±å“è¿è¡Œï¼Œè¿˜æ˜¯è§‰å¾—æœ‰å¿…è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨æœç´¢åˆ°stackoverflow<a href="http://stackoverflow.com/questions/19055089/pyinstaller-onefile-warning-pyconfig-h-when-importing-scipy-or-scipy-signal">è¿™ä¸ªå¸–å­</a>åï¼Œé—®é¢˜è§£å†³ã€‚
<!--more-->
é—®é¢˜çš„åŸå› æ˜¯pyinstalleræ‰“åŒ…æ—¶pyconfig.hå¤šæ‰“äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¼šæŠ¥å·²ç»å­˜åœ¨äº†ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠå¤šä½™çš„pyconfig.hå»æ‰ã€‚</p>

<p>ä¸‹é¢å¼€å§‹è¯¦ç»†è¯´æ˜å¦‚ä½•ä¿®æ”¹ï¼š</p>

<p>ä¸Šä¸€ç¯‡è®²åˆ°ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰“åŒ…exeï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c:/python27/python.exe c:/pyinstaller/pyinstaller.py --noconfirm --noconsole --onefile --icon=Icon.ico myapp.py
</code></pre></div></div>

<p>è¯·ä»”ç»†è§‚å¯Ÿmyapp.pyæ‰€åœ¨ç›®å½•ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆmyapp.specæ–‡ä»¶ï¼Œæ³¨æ„æ˜¯æ¯æ¬¡éƒ½ä¼šé‡æ–°ç”Ÿæˆï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s">'myapp.py'</span><span class="p">],</span>
         <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s">'c:</span><span class="se">\\</span><span class="s">src'</span><span class="p">],</span>
         <span class="n">hiddenimports</span><span class="o">=</span><span class="p">[],</span>
         <span class="n">hookspath</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">runtime_hooks</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="n">pyz</span> <span class="o">=</span> <span class="n">PYZ</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">pure</span><span class="p">)</span>
<span class="n">exe</span> <span class="o">=</span> <span class="n">EXE</span><span class="p">(</span><span class="n">pyz</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">scripts</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">binaries</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">zipfiles</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">,</span>
      <span class="n">name</span><span class="o">=</span><span class="s">'myapp.exe'</span><span class="p">,</span>
      <span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
      <span class="n">strip</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
      <span class="n">upx</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">console</span><span class="o">=</span><span class="bp">False</span> <span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s">'Icon.ico'</span><span class="p">)</span></code></pre></figure>

<p>å¤§æ¦‚è§£é‡Šä¸‹æ–‡ä»¶çš„å†…å®¹ï¼š</p>

<p>ç¬¬ä¸€è¡Œa = Anaylysis(â€¦)æ˜¯ç”¨æ¥åˆ†æç¨‹åºç”¨åˆ°çš„åº“ï¼Œä¸‹é¢å°±æ˜¯æ‰“åŒ…æˆexeçš„ä¸€äº›å‚æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ç¬¬ä¸€è¡Œä»£ç ä¹‹ååŠ ä»£ç æŠŠå¤šä½™çš„pyconfig.hå»æ‰ï¼Œæ–°çš„specæ–‡ä»¶å¦‚ä¸‹ï¼š</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span> <span class="n">Analysis</span><span class="p">([</span><span class="s">'myapp.py'</span><span class="p">],</span>
         <span class="n">pathex</span><span class="o">=</span><span class="p">[</span><span class="s">'c:</span><span class="se">\\</span><span class="s">src'</span><span class="p">],</span>
         <span class="n">hiddenimports</span><span class="o">=</span><span class="p">[],</span>
         <span class="n">hookspath</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">runtime_hooks</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="c1">#add_begin
</span><span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">:</span>
    <span class="k">if</span> <span class="s">'pyconfig'</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">break</span>
<span class="c1">#add_end
</span><span class="n">pyz</span> <span class="o">=</span> <span class="n">PYZ</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">pure</span><span class="p">)</span>
<span class="n">exe</span> <span class="o">=</span> <span class="n">EXE</span><span class="p">(</span><span class="n">pyz</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">scripts</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">binaries</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">zipfiles</span><span class="p">,</span>
      <span class="n">a</span><span class="o">.</span><span class="n">datas</span><span class="p">,</span>
      <span class="n">name</span><span class="o">=</span><span class="s">'myapp.exe'</span><span class="p">,</span>
      <span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
      <span class="n">strip</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
      <span class="n">upx</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
      <span class="n">console</span><span class="o">=</span><span class="bp">False</span> <span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s">'Icon.ico'</span><span class="p">)</span></code></pre></figure>

<p>ä¸ºäº†ä½¿ç”¨ä¿®æ”¹åçš„specæ–‡ä»¶æ¥æ‰“åŒ…ï¼Œéœ€è¦ä½¿ç”¨æ–°çš„å‘½ä»¤ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>c:/python27/python.exe c:/pyinstaller/pyinstaller.py myapp.spec
</code></pre></div></div>

<p>è¯•è¯•ï¼Œwarningæ²¡äº†å§</p>
:ET